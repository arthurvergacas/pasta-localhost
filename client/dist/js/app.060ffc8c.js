(function(e){function t(t){for(var a,r,o=t[0],c=t[1],l=t[2],d=0,f=[];d<o.length;d++)r=o[d],Object.prototype.hasOwnProperty.call(s,r)&&s[r]&&f.push(s[r][0]),s[r]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);u&&u(t);while(f.length)f.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],a=!0,o=1;o<n.length;o++){var c=n[o];0!==s[c]&&(a=!1)}a&&(i.splice(t--,1),e=r(r.s=n[0]))}return e}var a={},s={app:0},i=[];function r(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=a,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(n,a,function(t){return e[t]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var l=0;l<o.length;l++)t(o[l]);var u=c;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";var a=n("85ec"),s=n.n(a);s.a},"06ec":function(e,t,n){},2073:function(e,t,n){"use strict";var a=n("4dc1"),s=n.n(a);s.a},"2c35":function(e,t,n){},"32e8":function(e,t,n){"use strict";var a=n("2c35"),s=n.n(a);s.a},"418f":function(e,t,n){"use strict";var a=n("8c29"),s=n.n(a);s.a},"4dc1":function(e,t,n){},"53a0":function(e,t,n){"use strict";var a=n("730b"),s=n.n(a);s.a},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("nav",{staticClass:"d-flex flex-row",attrs:{id:"nav"}},[e._m(0),n("div",{staticClass:"p-2 align-self-center"},[n("button",{staticClass:"btn btn-outline-dark logout",attrs:{type:"button"},on:{click:e.logOut}},[e._v("Log Out")])])]),n("div",{staticClass:"container"},[n("router-view")],1),e._m(1)])},i=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"mr-auto p-2"},[n("h1",{attrs:{id:"header-title"}},[e._v(" Pasta: "),n("span",{attrs:{id:"localhost"}},[e._v("Localhost")])])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("footer",{staticClass:"footer"},[n("div",{staticClass:"container"},[n("span",{staticClass:"text-muted"},[e._v(" Made by "),n("a",{staticClass:"footer-link",attrs:{href:"https://github.com/arthurvergacas"}},[e._v("Arthur Vergaças")])])])])}],r=(n("d3b7"),n("ac1f"),n("5319"),n("96cf"),n("1da1")),o={url:"http://192.168.15.16"},c=o.url,l={methods:{logOut:function(){return Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(c,"/log-out"),{method:"POST"});case 2:sessionStorage.token="",window.location.replace("/");case 4:case"end":return e.stop()}}),e)})))()}}},u=l,d=(n("034f"),n("2877")),f=Object(d["a"])(u,s,i,!1,null,null,null),p=f.exports,h=n("8c4f"),m=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"login"},[e.isLoading?n("div",{staticClass:"spinner-border text-secondary",attrs:{role:"status"}},[n("span",{staticClass:"sr-only"},[e._v("Loading...")])]):e._e(),e._m(0),n("form",{on:{submit:function(t){return t.preventDefault(),e.login(t)}}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"name"}],attrs:{type:"text",spellcheck:"false",placeholder:"Digite seu nome",id:"input"},domProps:{value:e.name},on:{change:function(t){e.message=""},input:function(t){t.target.composing||(e.name=t.target.value)}}}),n("button",{attrs:{type:"submit",id:"button"},on:{keypress:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.login(t)}}},[e._v("Login")])]),n("div",{staticClass:"container message-wrapper d-flex flex-column"},[n("div",{},[n("span",{class:{logged:e.auth},attrs:{id:"user-not-found"}},[e._v(e._s(e.message))])]),n("div",{},[n("button",{attrs:{id:"button"},on:{click:e.goToSignIn}},[e._v("Sign In")])])])])},g=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("h1",{attrs:{id:"title"}},[e._v(" Pasta: "),n("span",{attrs:{id:"localhost"}},[e._v("Localhost")])])}],v=(n("b0c0"),o.url),b={data:function(){return{name:"",auth:!1,message:"",isLoading:!1}},mounted:function(){sessionStorage.token&&(window.location.href="/#/main")},methods:{login:function(){var e=this,t=this.name;""!==t?(this.isLoading=!0,fetch("".concat(v,"/log-in"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({name:t})}).then((function(t){if(e.isLoading=!1,200!=t.status)throw new Error("User not found");return t.json()})).then((function(t){e.auth=!0,e.message="Logging complete! Redirecting...",sessionStorage.token=t.token,window.location.href="/#/main"})).catch((function(){e.isLoading=!1,e.message="User not signed in"}))):this.message="Enter your username"},goToSignIn:function(){window.location.href="/#/sign-in"}}},w=b,_=(n("32e8"),Object(d["a"])(w,m,g,!1,null,"6c6ed78e",null)),C=_.exports,y=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container mt-4"},[n("div",{staticClass:"d-flex justify-content-center"},[n("SearchBar",{staticClass:"mb-3",on:{searching:e.handleSearch}})],1),n("FileList",{key:e.shouldUpdate,attrs:{searchParam:e.search}}),n("FileUpload",{on:{"file-uploaded":e.handleFileUpload,"file-uploading":e.handleFileUploading}})],1)},x=[],O=(n("841c"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container file-container"},[n("div",{staticClass:"row"},e._l(e.shownFiles,(function(e){return n("FileCard",{key:e.id,staticClass:"col-lg-3",attrs:{name:e.name,url:e.fileUrl,user:e.userName,up_date:e.uploaded_at,size:e.size}})})),1)])}),S=[],k=(n("99af"),n("4de4"),n("caad"),n("d81d"),n("2532"),n("5530")),j=n("2909"),F=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"card mx-n2 px-n1 mb-2"},[n("div",{staticClass:"card-body ml-n1"},[n("div",{staticClass:"card-head mb-2 mt-n2"},[n("div",{staticClass:"main-header"},[n("h5",{staticClass:"card-title",attrs:{title:e.name}},[e._v(e._s(e.name))]),n("span",{staticClass:"size text-muted"},[e._v(e._s(e.size))])]),n("h6",{staticClass:"card-subtitle text-muted"},[e._v(e._s(e.user))]),n("small",{staticClass:"text-muted"},[e._v(e._s(e.up_date))])]),n("div",{staticClass:"but"},[n("button",{staticClass:"btn btn-secondary mt-2 mb-n4",attrs:{type:"button"},on:{click:function(t){return e.downloadFile(e.url,e.name)}}},[e._v("Download")])])])])])},L=[];n("3ca3"),n("ddb0"),n("2b3d");function U(e){return fetch(e).then((function(e){return e.blob()})).then((function(e){return URL.createObjectURL(e)}))}var z={props:{name:String,url:String,user:String,up_date:String,size:String},methods:{downloadFile:function(e,t){return Object(r["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=document.createElement("a"),n.next=3,U(e);case 3:a.href=n.sent,a.download=t,document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a);case 9:case"end":return n.stop()}}),n)})))()}}},P=z,E=(n("e38e"),Object(d["a"])(P,F,L,!1,null,"110caa92",null)),R=E.exports,$=n("94df"),D=n.n($),M=o.url,T={components:{FileCard:R},props:{searchParam:String},data:function(){return{files:[],shownFiles:[]}},watch:{searchParam:function(e){e?(this.shownFiles=Object(j["a"])(this.files),this.shownFiles=this.shownFiles.filter((function(t){return t.name.toLowerCase().includes(e.toLowerCase())||t.userName.toLowerCase().includes(e.toLowerCase())}))):this.shownFiles=Object(j["a"])(this.files)}},methods:{getFiles:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(M,"/file"),{headers:{"x-access-token":sessionStorage.token}});case 2:return n=t.sent,403==n.status&&(sessionStorage.token="",window.location.replace("/")),t.next=6,n.json();case 6:e.files=t.sent,e.files=e.files.map((function(e){var t=new Date("".concat(e.uploaded_at," UTC")),n="".concat(t.getDate(),"/").concat(t.getMonth()+1,"/").concat(t.getFullYear()," às ").concat((t.getHours()<10?"0":"")+t.getHours(),":").concat((t.getMinutes()<10?"0":"")+t.getMinutes());return e.size=D()(e.size),Object(k["a"])(Object(k["a"])({},e),{},{uploaded_at:n})})),e.files.reverse(),e.shownFiles=Object(j["a"])(e.files);case 10:case"end":return t.stop()}}),t)})))()}},mounted:function(){this.getFiles()}},N=T,I=(n("2073"),Object(d["a"])(N,O,S,!1,null,"47732008",null)),V=I.exports,A=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("vueDropzone",{ref:"dropzone",staticClass:"row",class:{"dropzone-inactive":e.sendingFile},attrs:{id:"dropzone",useCustomSlot:!0,options:e.dropzoneOptions},on:{"vdropzone-file-added":e.handleFileAdded,"vdropzone-total-upload-progress":e.handleProgress,"vdropzone-complete-multiple":e.handleComplete}},[e.sendingFile?e._e():n("div",{staticClass:"dropzone-content"},[n("h3",{staticClass:"dropzone-title"},[e._v("Drop your files here to upload!")]),n("small",{staticClass:"subtitle"},[e._v("... or click to pick from your computer")])]),e.sendingFile?n("div",{staticClass:"progress"},[n("div",{staticClass:"progress-bar progress-bar-striped progress-bar-animated bg-success",style:{width:e.progress+"%"},attrs:{role:"progressbar","aria-valuenow":e.progress,"aria-valuemin":"0","aria-valuemax":"100"}})]):e._e(),e.sendingFile?n("div",{staticClass:"files-sending row"},e._l(e.filesBeingSent,(function(e){return n("UploadCard",{key:e.name,staticClass:"upload-card",attrs:{name:e.name,size:e.size}})})),1):e._e()])},B=[],J=n("92c3"),H=n.n(J),Y=(n("1e3f"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"card text-center",staticStyle:{width:"10rem"}},[n("div",{staticClass:"card-body"},[n("h5",{staticClass:"card-title",attrs:{title:e.name}},[e._v(e._s(e.name))]),n("p",{staticClass:"card-text"},[e._v(e._s(e.size))])])])}),q=[],G={props:{name:String,size:String}},K=G,Q=(n("e392"),Object(d["a"])(K,Y,q,!1,null,"eaadca9c",null)),W=Q.exports,X=o.url,Z={components:{vueDropzone:H.a,UploadCard:W},data:function(){return{dropzoneOptions:{url:"".concat(X,"/upload"),maxFilesize:1024,headers:{"x-access-token":sessionStorage.token},paramName:function(){return"file"},dictDefaultMessage:"Upload here",includeStyling:!1,previewsContainer:!1,uploadMultiple:!0,parallelUploads:20},sendingFile:!1,filesBeingSent:[],progress:0}},methods:{handleFileAdded:function(e){this.sendingFile=!0;var t={name:e.name,size:D()(e.size)};this.filesBeingSent.push(t),this.$emit("file-uploading")},handleProgress:function(e){this.progress=e},handleComplete:function(){this.sendingFile=!1,this.progress=0,this.filesBeingSent=[],this.$emit("file-uploaded")}}},ee=Z,te=(n("53a0"),Object(d["a"])(ee,A,B,!1,null,"068dd89b",null)),ne=te.exports,ae=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("input",{directives:[{name:"model",rawName:"v-model",value:e.search,expression:"search"}],staticClass:"search",attrs:{type:"text",spellcheck:"false",placeholder:"Search for a file or a user"},domProps:{value:e.search},on:{input:function(t){t.target.composing||(e.search=t.target.value)}}})},se=[],ie={data:function(){return{search:""}},watch:{search:function(){this.$emit("searching",this.search)}}},re=ie,oe=(n("418f"),Object(d["a"])(re,ae,se,!1,null,null,null)),ce=oe.exports,le={data:function(){return{shouldUpdate:!1,isUploading:!1,search:""}},components:{FileList:V,FileUpload:ne,SearchBar:ce},beforeCreate:function(){""==sessionStorage.token&&(window.location.href="/")},created:function(){window.addEventListener("beforeunload",this.handleRefresh)},beforeDestroy:function(){window.removeEventListener("beforeunload",this.handleRefresh)},methods:{handleFileUpload:function(){this.shouldUpdate=!this.shouldUpdate,this.isUploading=!1},handleFileUploading:function(){this.isUploading=!0},handleRefresh:function(e){this.isUploading&&(e.preventDefault(),e.returnValue="")},handleSearch:function(e){this.search=e}},beforeRouteLeave:function(e,t,n){if(this.isUploading){var a=window.confirm("If you leave now, your files won't be submitted to the Pasta: Localhost!\nAre you sure you want to leave?");a?n():n(!1)}}},ue=le,de=Object(d["a"])(ue,y,x,!1,null,null,null),fe=de.exports,pe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"sign-in"},[e.isLoading?n("div",{staticClass:"spinner-border text-secondary",attrs:{role:"status"}},[n("span",{staticClass:"sr-only"},[e._v("Loading...")])]):e._e(),e._m(0),n("form",{on:{submit:function(t){return t.preventDefault(),e.signIn(t)}}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"name"}],attrs:{type:"text",spellcheck:"false",placeholder:"Digite seu nome",id:"input"},domProps:{value:e.name},on:{change:function(t){e.notValid=!1},input:function(t){t.target.composing||(e.name=t.target.value)}}}),n("button",{attrs:{type:"submit",id:"button"}},[e._v("Cadastrar")])]),n("div",{staticClass:"container message-wrapper d-flex flex-column"},[n("div",{},[n("span",{class:{invalid:e.notValid},attrs:{id:"invalid-wrapper"}},[e._v("Usuário já existente")])])])])},he=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"text-left"},[n("a",{staticClass:"back-link",attrs:{href:"/"}},[e._v("Voltar")])])}],me=o.url,ge={data:function(){return{name:"",notValid:!1,isLoading:!1}},methods:{signIn:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.isLoading=!0,t.next=3,fetch("".concat(me,"/sign-in"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({name:e.name})});case 3:return n=t.sent,t.next=6,n.json();case 6:n=t.sent,e.isLoading=!1,"User already exists"==n.message?e.notValid=!0:window.location.replace("/");case 9:case"end":return t.stop()}}),t)})))()}}},ve=ge,be=(n("c83d"),Object(d["a"])(ve,pe,he,!1,null,"8d5d30a4",null)),we=be.exports;a["a"].use(h["a"]);var _e=[{path:"/",name:"Login",component:C},{path:"/main",name:"Main",component:fe},{path:"/sign-in",name:"SignIn",component:we}],Ce=new h["a"]({routes:_e}),ye=Ce;n("df25");a["a"].config.productionTip=!1,new a["a"]({router:ye,render:function(e){return e(p)}}).$mount("#app")},"730b":function(e,t,n){},"85ec":function(e,t,n){},"8c29":function(e,t,n){},a3ec:function(e,t,n){},c83d:function(e,t,n){"use strict";var a=n("06ec"),s=n.n(a);s.a},d209:function(e,t,n){},df25:function(e,t,n){},e38e:function(e,t,n){"use strict";var a=n("a3ec"),s=n.n(a);s.a},e392:function(e,t,n){"use strict";var a=n("d209"),s=n.n(a);s.a}});
//# sourceMappingURL=app.060ffc8c.js.map